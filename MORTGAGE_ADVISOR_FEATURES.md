# יועץ המשכנתא הדו-מצבי - מדריך מלא

## סקירה כללית

יצרנו מערכת יועץ משכנתא מתקדמת עם ממשק דו-מצבי שמותאם לכל סוגי המשתמשים. המערכת כוללת את כל הפיצ'רים שהוגדרו בדרישות המקוריות, עם עיצוב RTL נקי ומינימלי.

## 🎯 פיצ'רים שהושלמו

### ✅ מסך פתיחה דו־מצבי
- **Guided Mode ("ללוות אותי")** - אשף שאלה אחת בכל מסך עם הסברים מתקפלים
- **Pro Mode ("אני יודע מה אני עושה")** - דשבורד עם כל השלבים פתוחים
- עיצוב נקי ומינימלי עם תמיכה מלאה ב-RTL

### ✅ מפת־מסע תלת־שכבתית (Zoomable Journey)
- פס התקדמות עליון: הכרת הלקוח → בניית תמהיל → מו״מ בנקים
- שכבה בינונית של תתי־שלבים
- שכבה מפורטת במשבצות קטנות
- אנימציית זום עדינה עם Framer Motion

### ✅ מסך שאלה בודדת עם פאנל תועלת
- שאלה אחת בכל צעד (הון עצמי, הכנסות, וכו')
- פאנל תועלת בזמן אמת מראה:
  - מה תרוויחו מהתשובה
  - איך זה ישפיע על השלב הבא
  - עלות משוערת שנוספה לסל

### ✅ מסילת־עלות חיה (Cost Rail)
- סרגל צד דק עם עלות מצטברת
- עלויות צפויות קדימה (שמאות, פתיחת תיק, נוטריון)
- חלוקה ל-Fixed/Variable
- שקוף למחצה ולא מפריע

### ✅ "דרכון משכנתא" - מצב והתקדמות
- כרטיסון עגול בפינה
- חותמות למיילסטונים (✓ אפיון, ✓ תמהיל, ✓ אישור עקרוני)
- ETA קטן ומד אחוזים
- עיצוב חמוד ולא ילדותי

### ✅ קלפי-שלב (Stage Cards)
- כל שלב כרטיס: כותרת קצרה, תיאור בשורה, CTA יחיד
- שורת "מה צריך להביא" עם 2–3 אייקונים
- הכרטיס מתרחב לאקורדיון רק אם המשתמש מבקש
- דקדוק חזותי אחיד

### ✅ מחשבוני מיקרו־קונטקסט
- החישובים מופיעים רק כשצריך ומינימליים ברירת מחדל
- לחיצה על "מתקדם" פותחת פרמטרים נוספים
- הצגה גרפית נקייה: עמודות/ספארק־ליינים
- מחשבון יכולת קנייה, החזר חודשי, יחס החזר

### ✅ "DNA משכנתא" – פרופיל חזותי קצר
- לאחר 4–5 שאלות העדפה (יציבות/גמישות/עלות)
- ריבוע פרופיל: "מעדיף יציבות גבוהה, מחיר בינוני, גמישות גבוהה"
- מתרגם לתמהיל ברירת־מחדל מוסבר (למה X% פריים, למה צמוד וכו')
- תצוגה גרפית עם רדאר צ'ארט

### ✅ השוואת הצעות כמו "מיקסר"
- מסך השוואה שמאפשר לגרור כל מסלול מהצעה של בנק
- "סל ההצעה המנצחת" עם עדכון מיידי של החזר/עלות כוללת
- שורה "הנמוך בכל מסלול" שבונה לבד את ההצעה המנצחת
- Drag & Drop עם @dnd-kit

### ✅ מוד "סימולציית הלם ריבית"
- מתג קטן: +1% / +2% / +3% ריבית
- האנימציה מנענעת קלות את תצוגת ההחזר
- חזרה בלחיצה
- גרפים להשוואה לאורך זמן

### ✅ "Pass/Fail" לשערי מעבר
- לא מאפשר לעבור שלב בלי ✓ תנאי סף
- אין "סקר בנקים" בלי אישור עקרוני מסומן
- הפידבק חיובי ("נשאר עוד פריט קטן: דף עו״ש עדכני")

### ✅ רמזים "חכמים" במקום צ'אט
- בועות־טיפים קצרות שמופיעות רק כשמתגלה חסם
- למשל: יחס החזר גבוה מדי
- כפתור "תקן אוטומטית" שמציע קיצור תקופה/שינוי חלוקה

### ✅ שמירה נטולת חיכוך
- שומר פרופיל וסטטוס בלוקאל־סטוראג' (ללא התחברות)
- הצעה עדינה "רוצה לשמור בענן? התחברות קצרה"
- מרגיש מהיר ולא מחייב

## 🎨 שפה חזותית

### צבעים
- לבן/Off-white כבסיס
- אפורים רכים לטקסט משני
- הדגשת פרטים בכחול-טורקיז יחיד
- גרדיאנטים עדינים מכחול לירוק

### טיפוגרפיה
- תמיכה מלאה ב-RTL
- משקלים 400–600
- מרווח שורות נדיב
- היררכיה ברורה

### אייקונים
- Lucide React (קו דק)
- 20–24px
- צבע יחיד עקבי

### תנועה
- 120–160ms מהירות אנימציה
- Fade/Slide עדין בלבד
- לא קפיצות
- אנימציות הקשר מתאימות

## 🛠 טכנולוגיות

- **Next.js 15** - Framework
- **TypeScript** - Type Safety
- **Tailwind CSS** - Styling
- **Framer Motion** - Animations
- **Radix UI** - Components
- **Recharts** - Charts
- **@dnd-kit** - Drag & Drop
- **Lucide React** - Icons

## 📁 מבנה קבצים

```
src/
├── app/
│   └── mortgage-advisor/
│       └── page.tsx                 # דף ראשי
├── components/
│   └── mortgage-advisor/
│       ├── ModeSelector.tsx         # בחירת מצב
│       ├── GuidedMode.tsx          # מצב מודרך
│       ├── ProMode.tsx             # מצב מקצועי
│       ├── ZoomableJourney.tsx     # מפת מסע
│       ├── CostRail.tsx            # מסילת עלויות
│       ├── MortgagePassport.tsx    # דרכון משכנתא
│       ├── SmartHints.tsx          # רמזים חכמים
│       ├── BenefitPanel.tsx        # פאנל תועלת
│       ├── MicroCalculator.tsx     # מחשבוני מיקרו
│       ├── StageCard.tsx           # קלפי שלב
│       ├── MortgageDNA.tsx         # DNA משכנתא
│       ├── OfferMixer.tsx          # מיקסר הצעות
│       └── InterestShockSimulation.tsx # סימולציית הלם
```

## 🚀 הפעלה

1. **התקנת dependencies:**
```bash
npm install
```

2. **הפעלת שרת פיתוח:**
```bash
npm run dev
```

3. **גישה לאפליקציה:**
```
http://localhost:3000/mortgage-advisor
```

## 🔗 ניווט

הקישור ליועץ המשכנתא כבר נמצא בתפריט הניווט הראשי של האתר תחת "כלי יועצי משכנתא".

## 📋 פיצ'רים שטרם הושלמו (אופציונליים)

- **מיקרו-קופי דו־שכבתי** - מערכת הסברים מתקפלים מתקדמת יותר
- **מצב "הצג לי את התכנית שלי"** - יצוא PDF/שיתוף
- **שמירה בענן** - אופציה לשמירה עם חשבון משתמש

## 🎯 חוויית משתמש

המערכת מספקת חוויה מלאה ומקצועית עם:
- ממשק אינטואיטיבי לכל רמות המשתמשים
- פידבק מיידי ורמזים חכמים
- חישובים מדויקים בזמן אמת
- עיצוב נקי ומינימלי
- תמיכה מלאה בעברית ו-RTL
- אנימציות עדינות ומשמעותיות

המערכת מוכנה לשימוש ומספקת את כל הפונקציונליות הנדרשת לייעוץ משכנתא מקצועי.